import{m as y,a as f,_ as b,g as M,o as l,c as n,b as o,t as d,w as h,d as a,v as p,f as u,F as c,r as m,h as v,n as x,i as C,j as k,k as w}from"./index-58808999.js";import{r as V,d as E}from"./places-6e1844b7.js";import{U,_ as S,a as B}from"./eye-2b95d2c2.js";import{_ as q,a as A}from"./remove-c812daa3.js";import{_ as I}from"./doctors-7260acf5.js";const L={props:["editdoctor"],directives:{maska:U},data(){return{step:1,regions:V,districts:E,doctor:{spec:"",region:"",district:"",department:"",education:"",family:"",worktime:""},getDistricts:[],familyList:[{id:1,title:"Uylangan/Turmushga chiqqan"},{id:2,title:"Uylanmagan/Turmushga chiqmagan"}],educationList:[{id:1,title:"Maktabni bitirgan"},{id:2,title:"O'rta Maxsus"},{id:3,title:"Oliy"}],workTimeList:[{id:1,name:"Yarim stavka"},{id:2,name:"Asosiy shtat"},{id:3,name:"O`rindosh"}],image:""}},methods:{...y(["addDoctor","getDoctor","updateDoctor","getAllDepartments","getAllSpecs"]),uploadFile(){this.image=this.$refs.doctorImg.files[0]},getRegion(){this.doctor.region&&(this.getDistricts=this.districts.filter(i=>i.region_id==this.doctor.region))},nextStep(){this.doctor.name&&this.doctor.phone&&this.doctor.education&&this.doctor.family&&this.doctor.birthday&&this.doctor.district&&this.doctor.region?this.step=2:this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to`ldiring"})},postDoctor(){if(this.doctor.education&&this.doctor.family&&this.doctor.worktime&&this.doctor.exp){let i=new FormData;for(const e in this.doctor)i.append(e,this.doctor[e]);i.append("file",this.image),console.log(i),console.log(this.doctor),this.addDoctor(i),this.clear()}else this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to'ldiring"});this.step=1,this.clear()},save(){this.updateDoctor(this.doctor),this.doctor={spec:"",region:"",district:"",department:"",education:"",family:"",worktime:""},this.step=1,this.$store.commit("setDoctorModalToggle",!1),this.$store.commit("setDoctorEditModalToggle",!1)},clear(){this.step==2?this.step=1:(this.$store.commit("setDoctorModalToggle",!1),this.$store.commit("setDoctorEditModalToggle",!1),this.doctor={spec:"",region:"",district:"",department:"",education:"",family:"",worktime:""})}},computed:{...f(["doctorModalToggle","doctorEditModalToggle","departments","specs"])},mounted(){this.getAllDepartments(),this.getAllSpecs()},watch:{doctorEditModalToggle(i){i&&(this.doctor=this.editdoctor)}}},F={class:"modal__box"},N={class:"text-center mb-20"},$={key:0},O=o("div",{class:"step"},"1",-1),R=o("div",{class:"part mt-10 mb-10 text-center"},"Shaxsiy ma'lumotlar",-1),j={class:"row step-1"},z={class:"col-6 col-sm-12 mb-20"},K={class:"col-6 col-sm-12 mb-20"},Y={class:"col-6 col-sm-12 mb-20"},G=o("option",{value:""},"Ta'limni ro'yxatdan tanlang",-1),Q=["value"],H={class:"col-6 col-sm-12 mb-20"},J=o("option",{value:""},"Oilaviy holatni tanlang",-1),P=["value"],W={class:"col-6 col-sm-12 mb-20"},X={class:"col-6 col-sm-12 mb-20"},Z=o("option",{value:""},"Viloyatni ro'yxatdan tanlang",-1),tt=["value"],ot={class:"col-6 col-sm-12 mb-20"},et=o("option",{value:""},"Shahar/Tumanni ro'yxatdan tanlang",-1),st=["value"],it={class:"col-6 col-sm-12 mb-20"},lt={key:1},nt=o("div",{class:"step"},"2",-1),rt=o("div",{class:"part mt-10 mb-10 text-center"}," Mutaxassisslik ma'lumotlari ",-1),dt={class:"row step-2"},at={class:"col-6 col-sm-12 mb-20"},ct=o("option",{value:""},"Mutaxassisslikni ro'yxatdan tanlang",-1),mt=["value"],ut={class:"col-6 col-sm-12 mb-20"},pt=o("option",{value:""},"Bo'limni ro'yxatdan tanlang",-1),ht=["value"],gt={class:"col-6 col-sm-12 mb-20"},_t={class:"col-6 col-sm-12 mb-20"},vt=o("option",{value:""},"Ish grafigini tanlang",-1),kt=["value"],yt={class:"col-6 col-sm-12 mb-20"},ft={class:"modal__footer"};function bt(i,e,D,T,s,r){const g=M("maska");return l(),n("div",{class:x(` modal ${i.doctorModalToggle?"open":""}`)},[o("div",F,[o("h4",N,d(i.doctorEditModalToggle?"Shifokorni ma'lumotlarini tahrirlash":"Yangi shifokorni ro’yhatdan o’tkazish"),1),o("form",{onSubmit:e[14]||(e[14]=h(t=>i.doctorEditModalToggle?r.save():r.postDoctor(),["prevent"]))},[s.step==1?(l(),n("div",$,[O,R,o("section",j,[o("div",z,[a(o("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.doctor.name=t),placeholder:"Ism familiyasini kiriting"},null,512),[[p,s.doctor.name]])]),o("div",K,[a(o("input",{"data-maska":"+998 (##) ###-##-##",class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>s.doctor.phone=t),placeholder:"Telefon raqamini kiriting"},null,512),[[g],[p,s.doctor.phone]])]),o("div",Y,[a(o("select",{class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>s.doctor.education=t),placeholder:"Bo`lim nomini kiriting"},[G,(l(!0),n(c,null,m(s.educationList,t=>(l(),n("option",{key:t.id,value:t.id},d(t.title),9,Q))),128))],512),[[u,s.doctor.education]])]),o("div",H,[a(o("select",{class:"input","onUpdate:modelValue":e[3]||(e[3]=t=>s.doctor.family=t),placeholder:"Bo`lim nomini kiriting"},[J,(l(!0),n(c,null,m(s.familyList,t=>(l(),n("option",{key:t.id,value:t.id},d(t.title),9,P))),128))],512),[[u,s.doctor.family]])]),o("div",W,[a(o("input",{class:"input",type:"text",placeholder:"Tug`ilgan kun",onfocus:"(this.type='date')",onblur:"(this.type='text')","onUpdate:modelValue":e[4]||(e[4]=t=>s.doctor.birthday=t)},null,512),[[p,s.doctor.birthday]])]),o("div",X,[a(o("select",{class:"input",onChange:e[5]||(e[5]=(...t)=>r.getRegion&&r.getRegion(...t)),"onUpdate:modelValue":e[6]||(e[6]=t=>s.doctor.region=t)},[Z,(l(!0),n(c,null,m(s.regions,t=>(l(),n("option",{key:t.id,value:t.id},d(t.name),9,tt))),128))],544),[[u,s.doctor.region]])]),o("div",ot,[a(o("select",{class:"input","onUpdate:modelValue":e[7]||(e[7]=t=>s.doctor.district=t)},[et,(l(!0),n(c,null,m(s.getDistricts,t=>(l(),n("option",{key:t.id,value:t.id},d(t.name),9,st))),128))],512),[[u,s.doctor.district]])]),o("div",it,[o("input",{type:"file",ref:"doctorImg",onChange:e[8]||(e[8]=(...t)=>r.uploadFile&&r.uploadFile(...t))},null,544)])])])):v("",!0),s.step==2?(l(),n("div",lt,[nt,rt,o("section",dt,[o("div",at,[a(o("select",{class:"input","onUpdate:modelValue":e[9]||(e[9]=t=>s.doctor.spec=t),placeholder:"Bo`lim nomini kiriting"},[ct,(l(!0),n(c,null,m(i.specs,t=>(l(),n("option",{key:t._id,value:t._id},d(t.title),9,mt))),128))],512),[[u,s.doctor.spec]])]),o("div",ut,[a(o("select",{class:"input","onUpdate:modelValue":e[10]||(e[10]=t=>s.doctor.department=t),placeholder:"Bo`lim nomini kiriting"},[pt,(l(!0),n(c,null,m(i.departments,t=>(l(),n("option",{key:t._id,value:t._id},d(t.title),9,ht))),128))],512),[[u,s.doctor.department]])]),o("div",gt,[a(o("input",{class:"input",type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>s.doctor.exp=t),placeholder:"Ish tajribasini kiriting"},null,512),[[p,s.doctor.exp]])]),o("div",_t,[a(o("select",{class:"input","onUpdate:modelValue":e[12]||(e[12]=t=>s.doctor.worktime=t)},[vt,(l(!0),n(c,null,m(s.workTimeList,t=>(l(),n("option",{key:t.id,value:t.id},d(t.name),9,kt))),128))],512),[[u,s.doctor.worktime]])]),o("div",yt,[a(o("input",{class:"input",type:"text",placeholder:"Ishga kirgan vaqt",onfocus:"(this.type='date')","onUpdate:modelValue":e[13]||(e[13]=t=>s.doctor.startTime=t)},null,512),[[p,s.doctor.startTime]])])])])):v("",!0)],32),o("div",ft,[o("button",{class:"btn danger",onClick:e[15]||(e[15]=(...t)=>r.clear&&r.clear(...t))},"Bekor qilish"),(i.doctorEditModalToggle||i.doctorModalToggle)&&s.step==1?(l(),n("button",{key:0,class:"btn success btn__add",onClick:e[16]||(e[16]=(...t)=>r.nextStep&&r.nextStep(...t))}," Keyingi qadam ")):!i.doctorEditModalToggle&&s.step==2?(l(),n("button",{key:1,class:"btn success btn__add",onClick:e[17]||(e[17]=(...t)=>r.postDoctor&&r.postDoctor(...t))}," Kiritish ")):i.doctorEditModalToggle&&s.step==2?(l(),n("button",{key:2,class:"btn success hide btn__edit",onClick:e[18]||(e[18]=t=>r.save())}," Saqlash ")):v("",!0)])])],2)}const Dt=b(L,[["render",bt]]),Tt={components:{doctorModal:Dt},data(){return{doctor:{}}},methods:{...y(["getAllDoctors","deleteDoctor","getDoctor","getDoctorExcel"]),async edit(i){let e=await this.getDoctor(i);(e==null?void 0:e.status)==200&&(this.$store.commit("setDoctorModalToggle",!0),this.$store.commit("setDoctorEditModalToggle",!0),this.doctor={...e.data})},remove(i){confirm("Qaroringiz qat'iymi?")&&this.deleteDoctor(i)}},computed:{...f(["doctors"])},mounted(){this.getAllDoctors()}},Mt={class:"box"},xt={class:"d-flex justify-content-between align-items-center"},Ct=o("div",{class:"title"},"Shifokorlar",-1),wt=o("img",{src:S},null,-1),Vt={class:"table"},Et=o("thead",null,[o("tr",null,[o("th",null,"Ism-sharif"),o("th",null,"Raqami"),o("th",null,"Bo'lim"),o("th",null,"Mutaxassisslik"),o("th",null,"Tug'ilgan yili"),o("th",null,"Ishga kirgan sana"),o("th")])],-1),Ut=["onClick"],St={class:"first"},Bt=["src"],qt=["onClick"],At=o("img",{src:B},null,-1),It=[At],Lt=["onClick"],Ft=o("img",{src:q},null,-1),Nt=[Ft],$t=["onClick"],Ot=o("img",{src:A},null,-1),Rt=[Ot],jt=o("img",{src:I,alt:""},null,-1),zt=[jt];function Kt(i,e,D,T,s,r){const g=C("doctor-modal");return l(),n("section",null,[o("div",Mt,[o("div",xt,[Ct,o("div",null,[o("button",{onClick:e[0]||(e[0]=(...t)=>i.getDoctorExcel&&i.getDoctorExcel(...t)),class:"excel btn"},[wt,k(" Excel ")])])]),o("table",Vt,[Et,o("tbody",null,[(l(!0),n(c,null,m(i.doctors,t=>(l(),n("tr",{key:t._id,onClick:_=>i.$router.push(`/doctor/${t._id}`)},[o("td",St,[o("img",{src:`http://95.130.227.52:3112/${t.file[0]}`},null,8,Bt),k(" "+d(t.name),1)]),o("td",null,d(t.phone),1),o("td",null,d(t.department),1),o("td",null,d(t.spec),1),o("td",null,d(t.birthday),1),o("td",null,d(t.startTime),1),o("td",null,[o("button",{onClick:h(_=>i.$router.push(`/doctor/${t._id}`),["stop"])},It,8,qt),o("button",{onClick:h(_=>r.edit(t._id),["stop"])},Nt,8,Lt),o("button",{onClick:h(_=>r.remove(t._id),["stop"])},Rt,8,$t)])],8,Ut))),128))])])]),o("button",{class:"add",onClick:e[1]||(e[1]=t=>i.$store.commit("setDoctorModalToggle",!0))},zt),w(g,{editdoctor:s.doctor},null,8,["editdoctor"])])}const Pt=b(Tt,[["render",Kt]]);export{Pt as default};
