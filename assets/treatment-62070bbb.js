import{_ as p,m as g,a as v,o as l,c as n,b as t,F as m,r as u,t as i,w as b,d,f as c,v as _,n as f}from"./index-58808999.js";import{_ as k,a as y}from"./remove-c812daa3.js";import{_ as T}from"./doctors-7260acf5.js";const x={data(){return{toggle:!1,editToggle:!1,treatment:{patsient:"",doctor:"",room:""}}},methods:{...g(["addTreatment","getAllTreatments","deleteTreatment","getTreatment","updateTreatment","getAllPatsients","getAllRooms","getAllDoctors"]),add(){this.treatment.patsient&&this.treatment.doctor&&this.treatment.room&&this.treatment.date&&this.treatment.price&&this.treatment.comment?(this.addTreatment(this.treatment),this.clear()):this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to`ldiring"})},clear(){this.toggle=!1,this.treatment={patsient:"",doctor:"",room:""},this.editToggle=!1},async edit(r){let s=await this.getTreatment(r);(s==null?void 0:s.status)==200&&(this.toggle=!0,this.editToggle=!0,this.treatment={...s.data})},save(){this.updateTreatment(this.treatment),this.clear()},remove(r){confirm("Qaroringiz qat'iymi?")&&this.deleteTreatment(r)}},computed:{...v(["treatments","patsients","rooms","doctors"])},mounted(){this.getAllTreatments(),this.getAllPatsients(),this.getAllRooms(),this.getAllDoctors()}},A={class:"box"},C=t("div",{class:"d-flex justify-content-between align-items-center"},[t("div",{class:"title"},"Muolajalar")],-1),M={class:"table"},j=t("thead",null,[t("tr",null,[t("th",null,"Bemor"),t("th",null,"Shifokor"),t("th",null,"Davolanish vaqi"),t("th",null,"Xona"),t("th",null,"Narx"),t("th",null,"Xulosa"),t("th")])],-1),w={align:"right"},B=["onClick"],S=t("img",{src:k},null,-1),V=[S],q=["onClick"],U=t("img",{src:y},null,-1),D=[U],N=t("img",{src:T,alt:""},null,-1),X=[N],z={class:"modal__box"},F={class:"text-center mb-20"},L={class:"col-6 col-sm-12 mb-20"},P=t("option",{value:""},"Bemorni tanlang",-1),R=["value"],E={class:"col-6 col-sm-12 mb-20"},G=t("option",{value:""},"Shifokorni tanlang",-1),K=["value"],Q={class:"col-6 col-sm-12 mb-20"},Y=t("option",{value:""},"Xonani raqamini tanlang",-1),H=["value"],I={class:"col-6 col-sm-12 mb-20"},J={class:"col-6 col-sm-12 mb-20"},O={class:"col-6 col-sm-12 mb-20"},W={class:"modal__footer"};function Z(r,s,$,tt,o,a){return l(),n("section",null,[t("div",A,[C,t("table",M,[j,t("tbody",null,[(l(!0),n(m,null,u(r.treatments,e=>(l(),n("tr",{key:e._id},[t("td",null,i(e.patsient),1),t("td",null,i(e.doctor),1),t("td",null,i(e.date),1),t("td",null,i(e.room),1),t("td",null,i(e.price.toLocaleString())+" so'm",1),t("td",null,i(e.comment),1),t("td",w,[t("button",{onClick:h=>a.edit(e._id)},V,8,B),t("button",{onClick:h=>a.remove(e._id)},D,8,q)])]))),128))])])]),t("button",{class:"add",onClick:s[0]||(s[0]=e=>o.toggle=!0)},X),t("div",{class:f(` modal ${o.toggle?"open":""}`)},[t("div",z,[t("h4",F,i(o.editToggle?"Muolajani tahrirlash":"Yangi muolaja qo'shish"),1),t("form",{class:"row",id:"depart",onSubmit:s[7]||(s[7]=b(e=>o.editToggle?a.save():a.add(),["prevent"]))},[t("div",L,[d(t("select",{class:"input","onUpdate:modelValue":s[1]||(s[1]=e=>o.treatment.patsient=e)},[P,(l(!0),n(m,null,u(r.patsients,e=>(l(),n("option",{key:e._id,value:e._id},i(e.name),9,R))),128))],512),[[c,o.treatment.patsient]])]),t("div",E,[d(t("select",{class:"input","onUpdate:modelValue":s[2]||(s[2]=e=>o.treatment.doctor=e)},[G,(l(!0),n(m,null,u(r.doctors,e=>(l(),n("option",{key:e._id,value:e._id},i(e.name),9,K))),128))],512),[[c,o.treatment.doctor]])]),t("div",Q,[d(t("select",{class:"input","onUpdate:modelValue":s[3]||(s[3]=e=>o.treatment.room=e)},[Y,(l(!0),n(m,null,u(r.rooms,e=>(l(),n("option",{key:e._id,value:e._id},i(e.number),9,H))),128))],512),[[c,o.treatment.room]])]),t("div",I,[d(t("input",{class:"input",type:"text",placeholder:"Muolaja sanasi",onfocus:"(this.type='date')",onblur:"(this.type='text')","onUpdate:modelValue":s[4]||(s[4]=e=>o.treatment.date=e)},null,512),[[_,o.treatment.date]])]),t("div",J,[d(t("input",{class:"input",type:"number",placeholder:"Muolaja narxi","onUpdate:modelValue":s[5]||(s[5]=e=>o.treatment.price=e)},null,512),[[_,o.treatment.price]])]),t("div",O,[d(t("input",{class:"input",type:"text",name:"title","onUpdate:modelValue":s[6]||(s[6]=e=>o.treatment.comment=e),placeholder:"Muolaja xulosasi"},null,512),[[_,o.treatment.comment]])])],32),t("div",W,[t("button",{class:"btn danger",onClick:s[8]||(s[8]=(...e)=>a.clear&&a.clear(...e))},"Bekor qilish"),o.editToggle?(l(),n("button",{key:1,class:"btn success hide btn__edit",onClick:s[10]||(s[10]=e=>a.save())}," Saqlash ")):(l(),n("button",{key:0,class:"btn success btn__add",onClick:s[9]||(s[9]=(...e)=>a.add&&a.add(...e))}," Kiritish "))])])],2)])}const lt=p(x,[["render",Z]]);export{lt as default};
