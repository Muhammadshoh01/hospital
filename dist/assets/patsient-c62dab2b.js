import{m as b,a as k,_ as f,g as x,o as n,c as o,b as e,t as d,w as _,d as a,v as r,f as c,F as m,r as u,h as g,n as T,i as P,j as y,k as M}from"./index-58808999.js";import{r as D,d as w}from"./places-6e1844b7.js";import{U as B,_ as C,a as L}from"./eye-2b95d2c2.js";import{_ as S,a as E}from"./remove-c812daa3.js";import{_ as A}from"./doctors-7260acf5.js";const I={props:["editpatsient"],directives:{maska:B},data(){return{step:1,regions:D,districts:w,patsient:{region:"",district:"",education:"",married:"",employment:"",gender:"",bloodtype:"",factor:"",privilege:"",invalid:"",doctor:"",department:""},getDistricts:[],familyList:[{id:1,title:"Uylangan/Turmushga chiqqan"},{id:2,title:"Uylanmagan/Turmushga chiqmagan"}],educationList:[{id:1,title:"Maktabni bitirgan"},{id:2,title:"O'rta Maxsus"},{id:3,title:"Oliy"}],workTimeList:[{id:1,name:"Yarim stavka"},{id:2,name:"Asosiy shtat"},{id:3,name:"O`rindosh"}],employmentList:[{id:1,name:"Ishlaydi"},{id:2,name:"Ishlamaydi"}],bloodList:[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"AB"},{id:4,name:"O"}],genderList:[{id:1,name:"erkak"},{id:2,name:"ayol"}],factorList:[{id:1,name:"+"},{id:2,name:"-"}],privilegeList:[{id:1,name:"Order sohibi"},{id:2,name:"Pensioner"},{id:3,name:"Kam taminlangan"},{id:4,name:"Imtiyozi yo`q"}],invalidList:[{id:1,name:"1-guruh nogironi"},{id:2,name:"2-guruh nogironi"},{id:3,name:"3-guruh nogironi"},{id:4,name:"Invalid emas"}],image:""}},methods:{...b(["addPatsient","getPatsient","updatePatsient","getAllDepartments","getAllSpecs","getAllDoctors"]),getRegion(){this.patsient.region&&(this.getDistricts=this.districts.filter(l=>l.region_id==this.patsient.region))},nextStep(){if(this.step==1){if(this.patsient.name&&this.patsient.birthday&&this.patsient.region&&this.patsient.district&&this.patsient.education&&this.patsient.married&&this.patsient.phone&&this.patsient.employment&&this.patsient.workplace&&this.patsient.familyphone&&this.patsient.gender)return this.step=2,!1;this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to`ldiring"})}this.step==2&&(this.patsient.bloodtype&&this.patsient.factor&&this.patsient.policy&&this.patsient.policecompany&&this.patsient.privilege&&this.patsient.privilegeDoc&&this.patsient.privilegeDate&&this.patsient.invalid&&this.patsient.reactions?this.step=3:this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to`ldiring"}))},uploadFile(){this.image=this.$refs.patsientImg.files[0]},postPatsient(){if(this.patsient.arriveDate&&this.patsient.doctor&&this.patsient.department&&this.patsient.diagnos&&this.patsient.weight&&this.patsient.height){let l=new FormData;for(const i in this.patsient)l.append(i,this.patsient[i]);l.append("avatar",this.image),console.log(l),console.log(this.patsient),this.addPatsient(l),this.clear()}else this.$store.commit("setNotif",{type:"warning",text:"Barcha maydonlarni to'ldiring"});this.step=1,this.clear()},save(){this.updatePatsient(this.patsient),this.patsient={spec:"",region:"",district:"",department:"",family:"",education:""},this.step=1,this.$store.commit("setPatsientModalToggle",!1),this.$store.commit("setPatsientEditModalToggle",!1)},clear(){this.step==2?this.step=1:this.step==3?this.step=2:(this.$store.commit("setPatsientModalToggle",!1),this.$store.commit("setPatsientEditModalToggle",!1),this.patsient={spec:"",region:"",district:"",department:"",family:"",education:""})}},computed:{...k(["patsientModalToggle","patsientEditModalToggle","departments","specs","doctors"])},mounted(){this.getAllDepartments(),this.getAllSpecs(),this.getAllDoctors()},watch:{patsientEditModalToggle(l){l&&(this.patsient=this.editpatsient)}}},q={class:"modal__box"},z={class:"text-center mb-20"},F={key:0},N=e("div",{class:"step"},"1",-1),O=e("div",{class:"part mt-10 mb-10 text-center"},"Shaxsiy ma'lumotlar",-1),j={class:"row step-1"},R={class:"col-6 col-sm-12 mb-20"},K={class:"col-6 col-sm-12 mb-20"},Q={class:"col-6 col-sm-12 mb-20"},Y=e("option",{value:""},"Viloyatni ro'yxatdan tanlang",-1),G=["value"],J={class:"col-6 col-sm-12 mb-20"},H=e("option",{value:""},"Shahar/Tumanni ro'yxatdan tanlang",-1),W=["value"],X={class:"col-6 col-sm-12 mb-20"},Z={class:"col-6 col-sm-12 mb-20"},$=e("option",{value:""},"Ta'limni ro'yxatdan tanlang",-1),tt=["value"],et={class:"col-6 col-sm-12 mb-20"},it=e("option",{value:""},"Oilaviy holatni tanlang",-1),st=["value"],nt={class:"col-6 col-sm-12 mb-20"},ot=e("option",{value:""},"Bandlik holatni tanlang",-1),lt=["value"],at={class:"col-6 col-sm-12 mb-20"},dt={class:"col-6 col-sm-12 mb-20"},pt={class:"col-6 col-sm-12 mb-20"},rt={class:"col-6 col-sm-12 mb-20"},mt=e("option",{value:""},"Jinsni tanlang",-1),ut=["value"],ct={class:"col-6 col-sm-12 mb-20"},ht={key:1},gt=e("div",{class:"step"},"2",-1),_t=e("div",{class:"part mt-10 mb-10 text-center"},"Tibbiy ma’lumotlar",-1),vt={class:"row step-2"},yt={class:"col-3 col-sm-6 mb-20"},bt=e("option",{value:""},"Qon guruhini tanlang",-1),kt=["value"],ft={class:"col-3 col-sm-6 mb-20"},Vt=e("option",{value:""},"Rezus faktor",-1),Ut=["value"],xt={class:"col-6 col-sm-12 mb-20"},Tt={class:"col-6 col-sm-12 mb-20"},Pt={class:"col-6 col-sm-6 mb-20"},Mt=e("option",{value:""},"Imtiyoz kategoriyasi",-1),Dt=["value"],wt={class:"col-6 col-sm-12 mb-20"},Bt={class:"col-6 col-sm-12 mb-20"},Ct={class:"col-6 col-sm-6 mb-20"},Lt=e("option",{value:""},"Invalidlik",-1),St=["value"],Et={class:"col-6 col-sm-12 mb-20"},At={key:2},It=e("div",{class:"step"},"3",-1),qt=e("div",{class:"part mt-10 mb-10 text-center"},"Tashrif ma’lumotlari",-1),zt={class:"row step-2"},Ft={class:"col-6 col-sm-12 mb-20"},Nt={class:"col-6 col-sm-12 mb-20"},Ot=e("option",{value:""},"Ma'sul shifokor",-1),jt=["value"],Rt={class:"col-6 col-sm-12 mb-20"},Kt=e("option",{value:""},"Davolangan bo'lim",-1),Qt=["value"],Yt={class:"col-6 col-sm-12 mb-20"},Gt={class:"col-6 col-sm-12 mb-20"},Jt={class:"col-6 col-sm-12 mb-20"},Ht={class:"modal__footer"};function Wt(l,i,V,U,s,p){const h=x("maska");return n(),o("div",{class:T(` modal ${l.patsientModalToggle?"open":""}`)},[e("div",q,[e("h4",z,d(l.patsientEditModalToggle?"Bemorni ma'lumotlarini tahrirlash":"Yangi bemorni ro’yxatdan o’tkazish"),1),e("form",{onSubmit:i[29]||(i[29]=_(t=>l.patsientEditModalToggle?p.save():p.postPatsient(),["prevent"])),id:"patsientForm"},[s.step==1?(n(),o("div",F,[N,O,e("section",j,[e("div",R,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[0]||(i[0]=t=>s.patsient.name=t),placeholder:"Ism familiyasini kiriting"},null,512),[[r,s.patsient.name]])]),e("div",K,[a(e("input",{class:"input",type:"text",placeholder:"Tug'ilgan kun",onfocus:"this.type='date'","onUpdate:modelValue":i[1]||(i[1]=t=>s.patsient.birthday=t)},null,512),[[r,s.patsient.birthday]])]),e("div",Q,[a(e("select",{class:"input",onChange:i[2]||(i[2]=(...t)=>p.getRegion&&p.getRegion(...t)),"onUpdate:modelValue":i[3]||(i[3]=t=>s.patsient.region=t)},[Y,(n(!0),o(m,null,u(s.regions,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,G))),128))],544),[[c,s.patsient.region]])]),e("div",J,[a(e("select",{class:"input","onUpdate:modelValue":i[4]||(i[4]=t=>s.patsient.district=t)},[H,(n(!0),o(m,null,u(s.getDistricts,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,W))),128))],512),[[c,s.patsient.district]])]),e("div",X,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[5]||(i[5]=t=>s.patsient.address=t),placeholder:"Manzilni kiriting"},null,512),[[r,s.patsient.address]])]),e("div",Z,[a(e("select",{class:"input","onUpdate:modelValue":i[6]||(i[6]=t=>s.patsient.education=t),placeholder:"Bo`lim nomini kiriting"},[$,(n(!0),o(m,null,u(s.educationList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.title),9,tt))),128))],512),[[c,s.patsient.education]])]),e("div",et,[a(e("select",{class:"input","onUpdate:modelValue":i[7]||(i[7]=t=>s.patsient.married=t),placeholder:"Bo`lim nomini kiriting"},[it,(n(!0),o(m,null,u(s.familyList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.title),9,st))),128))],512),[[c,s.patsient.married]])]),e("div",nt,[a(e("select",{class:"input","onUpdate:modelValue":i[8]||(i[8]=t=>s.patsient.employment=t),placeholder:"Bo`lim nomini kiriting"},[ot,(n(!0),o(m,null,u(s.employmentList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,lt))),128))],512),[[c,s.patsient.employment]])]),e("div",at,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[9]||(i[9]=t=>s.patsient.workplace=t),placeholder:"Ish joyi"},null,512),[[r,s.patsient.workplace]])]),e("div",dt,[a(e("input",{"data-maska":"+998 (##) ###-##-##",class:"input",type:"text","onUpdate:modelValue":i[10]||(i[10]=t=>s.patsient.phone=t),placeholder:"Telefon raqamini kiriting"},null,512),[[h],[r,s.patsient.phone]])]),e("div",pt,[a(e("input",{"data-maska":"+998 (##) ###-##-##",class:"input",type:"text","onUpdate:modelValue":i[11]||(i[11]=t=>s.patsient.familyphone=t),placeholder:"Oila a’zolaridan telefon raqam"},null,512),[[h],[r,s.patsient.familyphone]])]),e("div",rt,[a(e("select",{class:"input","onUpdate:modelValue":i[12]||(i[12]=t=>s.patsient.gender=t),placeholder:"Bo`lim nomini kiriting"},[mt,(n(!0),o(m,null,u(s.genderList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,ut))),128))],512),[[c,s.patsient.gender]])]),e("div",ct,[e("input",{type:"file",ref:"patsientImg",onChange:i[13]||(i[13]=(...t)=>p.uploadFile&&p.uploadFile(...t))},null,544)])])])):g("",!0),s.step==2?(n(),o("div",ht,[gt,_t,e("section",vt,[e("div",yt,[a(e("select",{class:"input","onUpdate:modelValue":i[14]||(i[14]=t=>s.patsient.bloodtype=t),placeholder:"Bo`lim nomini kiriting"},[bt,(n(!0),o(m,null,u(s.bloodList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,kt))),128))],512),[[c,s.patsient.bloodtype]])]),e("div",ft,[a(e("select",{class:"input","onUpdate:modelValue":i[15]||(i[15]=t=>s.patsient.factor=t)},[Vt,(n(!0),o(m,null,u(s.factorList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,Ut))),128))],512),[[c,s.patsient.factor]])]),e("div",xt,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[16]||(i[16]=t=>s.patsient.policy=t),placeholder:"Sug'urta polisini kiriting"},null,512),[[r,s.patsient.policy]])]),e("div",Tt,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[17]||(i[17]=t=>s.patsient.policecompany=t),placeholder:"Sug'urta firmasini kiriting"},null,512),[[r,s.patsient.policecompany]])]),e("div",Pt,[a(e("select",{class:"input","onUpdate:modelValue":i[18]||(i[18]=t=>s.patsient.privilege=t)},[Mt,(n(!0),o(m,null,u(s.privilegeList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,Dt))),128))],512),[[c,s.patsient.privilege]])]),e("div",wt,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[19]||(i[19]=t=>s.patsient.privilegeDoc=t),placeholder:"Imtiyoz hujjatini kiriting"},null,512),[[r,s.patsient.privilegeDoc]])]),e("div",Bt,[a(e("input",{class:"input",type:"text",placeholder:"Imtiyoz olingan sana",onfocus:"this.type='date'","onUpdate:modelValue":i[20]||(i[20]=t=>s.patsient.privilegeDate=t)},null,512),[[r,s.patsient.privilegeDate]])]),e("div",Ct,[a(e("select",{class:"input","onUpdate:modelValue":i[21]||(i[21]=t=>s.patsient.invalid=t)},[Lt,(n(!0),o(m,null,u(s.invalidList,t=>(n(),o("option",{key:t.id,value:t.id},d(t.name),9,St))),128))],512),[[c,s.patsient.invalid]])]),e("div",Et,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[22]||(i[22]=t=>s.patsient.reactions=t),placeholder:"Allergik reaksiyalar"},null,512),[[r,s.patsient.reactions]])])])])):g("",!0),s.step==3?(n(),o("div",At,[It,qt,e("section",zt,[e("div",Ft,[a(e("input",{class:"input",type:"text",placeholder:"Tashrif sanasi",onfocus:"this.type='date'","onUpdate:modelValue":i[23]||(i[23]=t=>s.patsient.arriveDate=t)},null,512),[[r,s.patsient.arriveDate]])]),e("div",Nt,[a(e("select",{class:"input","onUpdate:modelValue":i[24]||(i[24]=t=>s.patsient.doctor=t)},[Ot,(n(!0),o(m,null,u(l.doctors,t=>(n(),o("option",{key:t._id,value:t._id},d(t.name),9,jt))),128))],512),[[c,s.patsient.doctor]])]),e("div",Rt,[a(e("select",{class:"input","onUpdate:modelValue":i[25]||(i[25]=t=>s.patsient.department=t)},[Kt,(n(!0),o(m,null,u(l.departments,t=>(n(),o("option",{key:t._id,value:t._id},d(t.title),9,Qt))),128))],512),[[c,s.patsient.department]])]),e("div",Yt,[a(e("input",{class:"input",type:"text","onUpdate:modelValue":i[26]||(i[26]=t=>s.patsient.diagnos=t),placeholder:"Diagnos"},null,512),[[r,s.patsient.diagnos]])]),e("div",Gt,[a(e("input",{class:"input",type:"number","onUpdate:modelValue":i[27]||(i[27]=t=>s.patsient.weight=t),placeholder:"Vazni"},null,512),[[r,s.patsient.weight]])]),e("div",Jt,[a(e("input",{class:"input",type:"number","onUpdate:modelValue":i[28]||(i[28]=t=>s.patsient.height=t),placeholder:"Bo'yi"},null,512),[[r,s.patsient.height]])])])])):g("",!0)],32),e("div",Ht,[e("button",{class:"btn danger",onClick:i[30]||(i[30]=(...t)=>p.clear&&p.clear(...t))},"Bekor qilish"),(l.patsientEditModalToggle||l.patsientModalToggle)&&(s.step==1||s.step==2)?(n(),o("button",{key:0,class:"btn success btn__add",onClick:i[31]||(i[31]=(...t)=>p.nextStep&&p.nextStep(...t))}," Keyingi qadam ")):!l.patsientEditModalToggle&&s.step==3?(n(),o("button",{key:1,class:"btn success btn__add",onClick:i[32]||(i[32]=(...t)=>p.postPatsient&&p.postPatsient(...t))}," Kiritish ")):l.patsientEditModalToggle&&s.step==3?(n(),o("button",{key:2,class:"btn success hide btn__edit",onClick:i[33]||(i[33]=t=>p.save())}," Saqlash ")):g("",!0)])])],2)}const Xt=f(I,[["render",Wt]]),Zt={components:{patsientModal:Xt},data(){return{patsient:{}}},methods:{...b(["getAllPatsients","deletePatsient","getPatsient","getPatsientExcel"]),async edit(l){let i=await this.getPatsient(l);(i==null?void 0:i.status)==200&&(this.$store.commit("setPatsientModalToggle",!0),this.$store.commit("setPatsientEditModalToggle",!0),this.patsient={...i.data})},remove(l){confirm("Qaroringiz qat'iymi?")&&this.deletePatsient(l)}},computed:{...k(["patsients"])},mounted(){this.getAllPatsients()}},$t={class:"box"},te={class:"d-flex justify-content-between align-items-center"},ee=e("div",{class:"title"},"Bemorlar",-1),ie=e("img",{src:C},null,-1),se={class:"table"},ne=e("thead",null,[e("tr",null,[e("th",null,"Ism-sharif"),e("th",null,"Raqami"),e("th",null,"Sana"),e("th",null,"Shifokor"),e("th",null,"Bo'lim"),e("th",null,"Sabab"),e("th")])],-1),oe=["onClick"],le={class:"first"},ae=["src"],de=["onClick"],pe=e("img",{src:L},null,-1),re=[pe],me=["onClick"],ue=e("img",{src:S},null,-1),ce=[ue],he=["onClick"],ge=e("img",{src:E},null,-1),_e=[ge],ve=e("img",{src:A,alt:""},null,-1),ye=[ve];function be(l,i,V,U,s,p){const h=P("patsient-modal");return n(),o("section",null,[e("div",$t,[e("div",te,[ee,e("div",null,[e("button",{onClick:i[0]||(i[0]=(...t)=>l.getPatsientExcel&&l.getPatsientExcel(...t)),class:"excel btn"},[ie,y(" Excel ")])])]),e("table",se,[ne,e("tbody",null,[(n(!0),o(m,null,u(l.patsients,(t,ke)=>(n(),o("tr",{key:t._id,onClick:v=>l.$router.push(`/patsient/${t._id}`)},[e("td",le,[e("img",{src:`http://95.130.227.52:3112/${t.avatar}`},null,8,ae),y(" "+d(t.name),1)]),e("td",null,d(t.phone),1),e("td",null,d(t.arriveDate),1),e("td",null,d(t.doctor),1),e("td",null,d(t.department),1),e("td",null,d(t.diagnos),1),e("td",null,[e("button",{onClick:_(v=>l.$router.push(`/patsient/${t._id}`),["stop"])},re,8,de),e("button",{onClick:_(v=>p.edit(t._id),["stop"])},ce,8,me),e("button",{onClick:_(v=>p.remove(t._id),["stop"])},_e,8,he)])],8,oe))),128))])])]),e("button",{class:"add",onClick:i[1]||(i[1]=t=>l.$store.commit("setPatsientModalToggle",!0))},ye),M(h,{editpatsient:s.patsient},null,8,["editpatsient"])])}const Pe=f(Zt,[["render",be]]);export{Pe as default};
